{"version":3,"sources":["../../server/middleware/authenticate.js"],"names":["User","require","authenticate","req","res","next","token","header","findByToken","then","user","Promise","reject","catch","status","send","module","exports"],"mappings":";;AAAA,MAAM,EAACA,IAAD,KAASC,QAAQ,kBAAR,CAAf;;AAEA,MAAMC,eAAe,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACxC,OAAMC,QAAQH,IAAII,MAAJ,CAAW,QAAX,CAAd;;AAEAP,MAAKQ,WAAL,CAAiBF,KAAjB,EACCG,IADD,CACOC,IAAD,IAAU;AACf,MAAI,CAACA,IAAL,EAAW;AACV,UAAOC,QAAQC,MAAR,EAAP;AACA;;AAEDT,MAAIO,IAAJ,GAAWA,IAAX;AACAP,MAAIG,KAAJ,GAAYA,KAAZ;AACAD;AACA,EATD,EAUCQ,KAVD,CAUO,MAAM;AAAE;AACdT,MAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB;AACA,EAZD;AAaA,CAhBD;;AAkBAC,OAAOC,OAAP,GAAiB;AAChBf;AADgB,CAAjB","file":"authenticate.js","sourcesContent":["const {User} = require('./../models/User');\n\nconst authenticate = (req, res, next) => {\n\tconst token = req.header('x-auth');\n\n\tUser.findByToken(token)\n\t.then((user) => {\n\t\tif (!user) {\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\treq.user = user;\n\t\treq.token = token;\n\t\tnext();\n\t})\n\t.catch(() => { // might have 'e' parameter\n\t\tres.status(401).send();\n\t});\n};\n\nmodule.exports = {\n\tauthenticate\n};\n"]}